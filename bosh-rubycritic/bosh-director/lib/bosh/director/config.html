<!DOCTYPE html>
<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Ruby Critic - Home</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- StyleSheets -->
    <link href="../../../../assets/stylesheets/bootstrap.min.css" media="screen, projection, print" rel="stylesheet" type="text/css">
    <link href="../../../../assets/stylesheets/font-awesome.min.css" media="screen, projection, print" rel="stylesheet" type="text/css">
    <link href="../../../../assets/stylesheets/prettify.custom_theme.css" media="screen, projection, print" rel="stylesheet" type="text/css">
    <link href="../../../../assets/stylesheets/application.css" media="screen, projection, print" rel="stylesheet" type="text/css">
  </head>

  <body>
    <header class="navbar navbar-default navbar-fixed-top">
      <a href="#menu-toggle" class="btn btn-default hidden-lg visible-sm-* hidden-md visible-xs-* pull-left" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a>
      <a href="../../../../overview.html"><img src="../../../../assets/images/logo.png" title="Ruby Critic Logo" width="55"><span class="logo">RUBYCRITIC</span></a>
    </header>
    <div id="wrapper">
      <!-- Sidebar -->
      <aside id="sidebar-wrapper">
        <ul class="sidebar-nav">
          <li class="sidebar-item">
            <a href="../../../../overview.html" class="project-nav-item overview-nav"><i class="fa fa-dashboard"></i>Overview</a>
          </li>
          <li class="sidebar-item">
            <a href="../../../../code_index.html" class="project-nav-item code-index-nav"><i class="fa fa-code"></i>Code</a>
          </li>
          <li class="sidebar-item">
            <a href="../../../../smells_index.html" class="project-nav-item smells-index-nav"><i class="fa fa-warning"></i>Smells</a>
          </li>
        </ul>
      </aside>
      <!-- /#sidebar-wrapper -->
      <div id="page-content-wrapper">
        <div class="container-fluid">
          <div class="row">
  <!--Page Title -->
  <div class="Page_Title">
    <div class="file-time">
      <span class="committed-at">
        
          Updated <time class='js-timeago' datetime='2018-06-22 10:12:42 -0700'>2018-06-22 10:12:42 -0700</time>
        
      </span>
    </div>
    <div>
      <h3><small>bosh-director/lib/bosh/director /</small> config.rb</h3>
    </div>
  </div>
  <!--End Page Title -->
  <div class="Content_Wrapper">
    <!-- code detail -->
    <div class="code-top-detail clearfix row">
      <div class="col-md-8">
        <div class="row">
          <div class="col-md-1">
            <div class="rating f big">
              F
            </div>
          </div>
          <div class="code-statistics col-md-11">
            <div class="col-md-3">
              <div><span class="metric">541</span><small> lines of codes</small></div>
              <div><span class="metric">45</span><small> methods</small></div>
            </div>
            <div class="col-md-3">
              <div><span class="metric">10.7</span><small> complexity/method</small></div>
              <div><span class="metric">216</span><small> churn</small></div>
            </div>
            <div class="col-md-3">
              <div><span class="metric">481.99</span><small> complexity</small></div>
              <div><span class="metric">92</span><small> duplications</small></div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="code-tabs">
          <ul class="nav nav-pills right-to-left">
            <li><a href="#" id="toggle-code" class="toggle-button button">code</a></li>
            <li class="active">
              <a href="#" id="toggle-smells" class="toggle-button button">
                92
                smells
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>

    <code class="prettyprint linenums lang-ruby file-code js-file-code">require &#39;fileutils&#39;
require &#39;logging&#39;
require &#39;socket&#39;
require &#39;uri&#39;
require &#39;common/logging/filters&#39;
require &#39;tmpdir&#39;
require &#39;common/common&#39;
require &#39;common/thread_formatter&#39;

module Bosh::Director

  # We want to shift from class methods to instance methods here.

  class Config<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Instance-Variable-Assumption.md" target="_blank"><b>InstanceVariableAssumption</b></a>        </span>      </div>      <span>Bosh::Director::Config assumes too much for instance variable '@agent_env'</span>          </div>  </li>  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Instance-Variable-Assumption.md" target="_blank"><b>InstanceVariableAssumption</b></a>        </span>      </div>      <span>Bosh::Director::Config assumes too much for instance variable '@cloud_options'</span>          </div>  </li>  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Instance-Variable-Assumption.md" target="_blank"><b>InstanceVariableAssumption</b></a>        </span>      </div>      <span>Bosh::Director::Config assumes too much for instance variable '@compiled_package_cache_blobstore'</span>          </div>  </li>  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Instance-Variable-Assumption.md" target="_blank"><b>InstanceVariableAssumption</b></a>        </span>      </div>      <span>Bosh::Director::Config assumes too much for instance variable '@compiled_package_cache_options'</span>          </div>  </li>  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Instance-Variable-Assumption.md" target="_blank"><b>InstanceVariableAssumption</b></a>        </span>      </div>      <span>Bosh::Director::Config assumes too much for instance variable '@config_server'</span>          </div>  </li>  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Instance-Variable-Assumption.md" target="_blank"><b>InstanceVariableAssumption</b></a>        </span>      </div>      <span>Bosh::Director::Config assumes too much for instance variable '@config_server_enabled'</span>          </div>  </li>  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Instance-Variable-Assumption.md" target="_blank"><b>InstanceVariableAssumption</b></a>        </span>      </div>      <span>Bosh::Director::Config assumes too much for instance variable '@current_job'</span>          </div>  </li>  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Instance-Variable-Assumption.md" target="_blank"><b>InstanceVariableAssumption</b></a>        </span>      </div>      <span>Bosh::Director::Config assumes too much for instance variable '@dns'</span>          </div>  </li>  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Instance-Variable-Assumption.md" target="_blank"><b>InstanceVariableAssumption</b></a>        </span>      </div>      <span>Bosh::Director::Config assumes too much for instance variable '@dns_db'</span>          </div>  </li>  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Instance-Variable-Assumption.md" target="_blank"><b>InstanceVariableAssumption</b></a>        </span>      </div>      <span>Bosh::Director::Config assumes too much for instance variable '@local_dns_enabled'</span>          </div>  </li>  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Instance-Variable-Assumption.md" target="_blank"><b>InstanceVariableAssumption</b></a>        </span>      </div>      <span>Bosh::Director::Config assumes too much for instance variable '@local_dns_include_index'</span>          </div>  </li>  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Instance-Variable-Assumption.md" target="_blank"><b>InstanceVariableAssumption</b></a>        </span>      </div>      <span>Bosh::Director::Config assumes too much for instance variable '@local_dns_use_dns_addresses'</span>          </div>  </li>  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Instance-Variable-Assumption.md" target="_blank"><b>InstanceVariableAssumption</b></a>        </span>      </div>      <span>Bosh::Director::Config assumes too much for instance variable '@lock'</span>          </div>  </li>  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Instance-Variable-Assumption.md" target="_blank"><b>InstanceVariableAssumption</b></a>        </span>      </div>      <span>Bosh::Director::Config assumes too much for instance variable '@log_file_path'</span>          </div>  </li>  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Instance-Variable-Assumption.md" target="_blank"><b>InstanceVariableAssumption</b></a>        </span>      </div>      <span>Bosh::Director::Config assumes too much for instance variable '@logger'</span>          </div>  </li>  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Instance-Variable-Assumption.md" target="_blank"><b>InstanceVariableAssumption</b></a>        </span>      </div>      <span>Bosh::Director::Config assumes too much for instance variable '@nats_client_certificate_path'</span>          </div>  </li>  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Instance-Variable-Assumption.md" target="_blank"><b>InstanceVariableAssumption</b></a>        </span>      </div>      <span>Bosh::Director::Config assumes too much for instance variable '@nats_client_private_key_path'</span>          </div>  </li>  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Instance-Variable-Assumption.md" target="_blank"><b>InstanceVariableAssumption</b></a>        </span>      </div>      <span>Bosh::Director::Config assumes too much for instance variable '@nats_rpc'</span>          </div>  </li>  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Instance-Variable-Assumption.md" target="_blank"><b>InstanceVariableAssumption</b></a>        </span>      </div>      <span>Bosh::Director::Config assumes too much for instance variable '@nats_server_ca_path'</span>          </div>  </li>  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Instance-Variable-Assumption.md" target="_blank"><b>InstanceVariableAssumption</b></a>        </span>      </div>      <span>Bosh::Director::Config assumes too much for instance variable '@nats_uri'</span>          </div>  </li>  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Instance-Variable-Assumption.md" target="_blank"><b>InstanceVariableAssumption</b></a>        </span>      </div>      <span>Bosh::Director::Config assumes too much for instance variable '@revision'</span>          </div>  </li>  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Instance-Variable-Assumption.md" target="_blank"><b>InstanceVariableAssumption</b></a>        </span>      </div>      <span>Bosh::Director::Config assumes too much for instance variable '@uuid'</span>          </div>  </li>  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Instance-Variable-Assumption.md" target="_blank"><b>InstanceVariableAssumption</b></a>        </span>      </div>      <span>Bosh::Director::Config assumes too much for instance variable '@version'</span>          </div>  </li>  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Too-Many-Instance-Variables.md" target="_blank"><b>TooManyInstanceVariables</b></a>        </span>      </div>      <span>Bosh::Director::Config has at least 57 instance variables</span>          </div>  </li>  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Too-Many-Methods.md" target="_blank"><b>TooManyMethods</b></a>        </span>      </div>      <span>Bosh::Director::Config has at least 45 methods</span>          </div>  </li></ol>
    class &lt;&lt; self
      attr_accessor(
        :base_dir,<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Attribute.md" target="_blank"><b>Attribute</b></a>        </span>      </div>      <span>Bosh::Director::Config#base_dir is a writable attribute</span>          </div>  </li></ol>
        :cloud_options,<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Attribute.md" target="_blank"><b>Attribute</b></a>        </span>      </div>      <span>Bosh::Director::Config#cloud_options is a writable attribute</span>          </div>  </li></ol>
        :current_job,<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Attribute.md" target="_blank"><b>Attribute</b></a>        </span>      </div>      <span>Bosh::Director::Config#current_job is a writable attribute</span>          </div>  </li></ol>
        :db,<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Attribute.md" target="_blank"><b>Attribute</b></a>        </span>      </div>      <span>Bosh::Director::Config#db is a writable attribute</span>          </div>  </li></ol>
        :default_ssh_options,<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Attribute.md" target="_blank"><b>Attribute</b></a>        </span>      </div>      <span>Bosh::Director::Config#default_ssh_options is a writable attribute</span>          </div>  </li></ol>
        :default_update_vm_strategy,<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Attribute.md" target="_blank"><b>Attribute</b></a>        </span>      </div>      <span>Bosh::Director::Config#default_update_vm_strategy is a writable attribute</span>          </div>  </li></ol>
        :dns,<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Attribute.md" target="_blank"><b>Attribute</b></a>        </span>      </div>      <span>Bosh::Director::Config#dns is a writable attribute</span>          </div>  </li></ol>
        :dns_db,<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Attribute.md" target="_blank"><b>Attribute</b></a>        </span>      </div>      <span>Bosh::Director::Config#dns_db is a writable attribute</span>          </div>  </li></ol>
        :enable_cpi_resize_disk,<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Attribute.md" target="_blank"><b>Attribute</b></a>        </span>      </div>      <span>Bosh::Director::Config#enable_cpi_resize_disk is a writable attribute</span>          </div>  </li></ol>
        :enable_post_deploy,<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Attribute.md" target="_blank"><b>Attribute</b></a>        </span>      </div>      <span>Bosh::Director::Config#enable_post_deploy is a writable attribute</span>          </div>  </li></ol>
        :enable_snapshots,<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Attribute.md" target="_blank"><b>Attribute</b></a>        </span>      </div>      <span>Bosh::Director::Config#enable_snapshots is a writable attribute</span>          </div>  </li></ol>
        :enable_virtual_delete_vms,<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Attribute.md" target="_blank"><b>Attribute</b></a>        </span>      </div>      <span>Bosh::Director::Config#enable_virtual_delete_vms is a writable attribute</span>          </div>  </li></ol>
        :event_log,<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Attribute.md" target="_blank"><b>Attribute</b></a>        </span>      </div>      <span>Bosh::Director::Config#event_log is a writable attribute</span>          </div>  </li></ol>
        :fix_stateful_nodes,<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Attribute.md" target="_blank"><b>Attribute</b></a>        </span>      </div>      <span>Bosh::Director::Config#fix_stateful_nodes is a writable attribute</span>          </div>  </li></ol>
        :flush_arp,<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Attribute.md" target="_blank"><b>Attribute</b></a>        </span>      </div>      <span>Bosh::Director::Config#flush_arp is a writable attribute</span>          </div>  </li></ol>
        :generate_vm_passwords,<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Attribute.md" target="_blank"><b>Attribute</b></a>        </span>      </div>      <span>Bosh::Director::Config#generate_vm_passwords is a writable attribute</span>          </div>  </li></ol>
        :keep_unreachable_vms,<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Attribute.md" target="_blank"><b>Attribute</b></a>        </span>      </div>      <span>Bosh::Director::Config#keep_unreachable_vms is a writable attribute</span>          </div>  </li></ol>
        :local_dns,<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Attribute.md" target="_blank"><b>Attribute</b></a>        </span>      </div>      <span>Bosh::Director::Config#local_dns is a writable attribute</span>          </div>  </li></ol>
        :logger,<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Attribute.md" target="_blank"><b>Attribute</b></a>        </span>      </div>      <span>Bosh::Director::Config#logger is a writable attribute</span>          </div>  </li></ol>
        :max_tasks,<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Attribute.md" target="_blank"><b>Attribute</b></a>        </span>      </div>      <span>Bosh::Director::Config#max_tasks is a writable attribute</span>          </div>  </li></ol>
        :max_threads,<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Attribute.md" target="_blank"><b>Attribute</b></a>        </span>      </div>      <span>Bosh::Director::Config#max_threads is a writable attribute</span>          </div>  </li></ol>
        :max_vm_create_tries,<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Attribute.md" target="_blank"><b>Attribute</b></a>        </span>      </div>      <span>Bosh::Director::Config#max_vm_create_tries is a writable attribute</span>          </div>  </li></ol>
        :name,<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Attribute.md" target="_blank"><b>Attribute</b></a>        </span>      </div>      <span>Bosh::Director::Config#name is a writable attribute</span>          </div>  </li></ol>
        :nats_server_ca,<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Attribute.md" target="_blank"><b>Attribute</b></a>        </span>      </div>      <span>Bosh::Director::Config#nats_server_ca is a writable attribute</span>          </div>  </li></ol>
        :nats_uri,<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Attribute.md" target="_blank"><b>Attribute</b></a>        </span>      </div>      <span>Bosh::Director::Config#nats_uri is a writable attribute</span>          </div>  </li></ol>
        :process_uuid,<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Attribute.md" target="_blank"><b>Attribute</b></a>        </span>      </div>      <span>Bosh::Director::Config#process_uuid is a writable attribute</span>          </div>  </li></ol>
        :remove_dev_tools,<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Attribute.md" target="_blank"><b>Attribute</b></a>        </span>      </div>      <span>Bosh::Director::Config#remove_dev_tools is a writable attribute</span>          </div>  </li></ol>
        :result,<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Attribute.md" target="_blank"><b>Attribute</b></a>        </span>      </div>      <span>Bosh::Director::Config#result is a writable attribute</span>          </div>  </li></ol>
        :revision,<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Attribute.md" target="_blank"><b>Attribute</b></a>        </span>      </div>      <span>Bosh::Director::Config#revision is a writable attribute</span>          </div>  </li></ol>
        :task_checkpoint_interval,<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Attribute.md" target="_blank"><b>Attribute</b></a>        </span>      </div>      <span>Bosh::Director::Config#task_checkpoint_interval is a writable attribute</span>          </div>  </li></ol>
        :trusted_certs,<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Attribute.md" target="_blank"><b>Attribute</b></a>        </span>      </div>      <span>Bosh::Director::Config#trusted_certs is a writable attribute</span>          </div>  </li></ol>
        :uuid,<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Attribute.md" target="_blank"><b>Attribute</b></a>        </span>      </div>      <span>Bosh::Director::Config#uuid is a writable attribute</span>          </div>  </li></ol>
        :verify_multidigest_path,<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Attribute.md" target="_blank"><b>Attribute</b></a>        </span>      </div>      <span>Bosh::Director::Config#verify_multidigest_path is a writable attribute</span>          </div>  </li></ol>
        :version,<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Attribute.md" target="_blank"><b>Attribute</b></a>        </span>      </div>      <span>Bosh::Director::Config#version is a writable attribute</span>          </div>  </li></ol>
      )

      attr_reader(
        :config_server,
        :config_server_enabled,
        :db_config,
        :director_ips,
        :enable_nats_delivered_templates,
        :ignore_missing_gateway,
        :nats_client_ca_certificate_path,
        :nats_client_ca_private_key_path,
        :nats_client_certificate_path,
        :nats_client_private_key_path,
        :record_events,
        :runtime,
      )

      def clear<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Too-Many-Statements.md" target="_blank"><b>TooManyStatements</b></a>        </span>      </div>      <span>Bosh::Director::Config#clear has approx 8 statements</span>          </div>  </li></ol>
        self.instance_variables.each do |ivar|
          self.instance_variable_set(ivar, nil)
        end

        Thread.list.each do |thr|
          thr[:bosh] = nil
        end

        @compiled_package_cache = nil
        @compiled_package_blobstore = nil
        @compiled_package_cache_options = nil

        @nats_rpc = nil
      end

      def configure(config)<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="http://docs.seattlerb.org/flog/" target="_blank"><b>VeryHighComplexity</b></a>        </span>      </div>      <span>Bosh::Director::Config::configure has a flog score of 211</span>          </div>  </li>  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Too-Many-Statements.md" target="_blank"><b>TooManyStatements</b></a>        </span>      </div>      <span>Bosh::Director::Config#configure has approx 73 statements</span>          </div>  </li></ol>
        @max_vm_create_tries = Integer(config.fetch(&#39;max_vm_create_tries&#39;, 5))
        @flush_arp = config.fetch(&#39;flush_arp&#39;, false)

        @base_dir = config[&#39;dir&#39;]

        # checkpoint task progress every 30 secs
        @task_checkpoint_interval = 30

        logging_config = config.fetch(&#39;logging&#39;, {})
        logging_file = ENV[&#39;BOSH_DIRECTOR_LOG_FILE&#39;] || logging_config.fetch(&#39;file&#39;, nil)
        if logging_file
          @log_file_path = logging_file
          shared_appender = Logging.appenders.file(<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank"><b>DuplicateMethodCall</b></a>        </span>      </div>      <span>Bosh::Director::Config#configure calls 'Logging.appenders' 2 times</span>              <span>Locations:</span>                  <a href="config.html#L97" class="js-smell-location">0</a>                  <a href="config.html#L103" class="js-smell-location">1</a>                  </div>  </li></ol>
            &#39;Director&#39;,
            filename: @log_file_path,
            layout: ThreadFormatter.layout<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank"><b>DuplicateMethodCall</b></a>        </span>      </div>      <span>Bosh::Director::Config#configure calls 'ThreadFormatter.layout' 2 times</span>              <span>Locations:</span>                  <a href="config.html#L100" class="js-smell-location">0</a>                  <a href="config.html#L106" class="js-smell-location">1</a>                  </div>  </li></ol>
          )
        else
          shared_appender = Logging.appenders.io(<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank"><b>DuplicateMethodCall</b></a>        </span>      </div>      <span>Bosh::Director::Config#configure calls 'Logging.appenders' 2 times</span>              <span>Locations:</span>                  <a href="config.html#L97" class="js-smell-location">0</a>                  <a href="config.html#L103" class="js-smell-location">1</a>                  </div>  </li></ol>
            &#39;Director&#39;,
            $stdout,
            layout: ThreadFormatter.layout<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank"><b>DuplicateMethodCall</b></a>        </span>      </div>      <span>Bosh::Director::Config#configure calls 'ThreadFormatter.layout' 2 times</span>              <span>Locations:</span>                  <a href="config.html#L100" class="js-smell-location">0</a>                  <a href="config.html#L106" class="js-smell-location">1</a>                  </div>  </li></ol>
          )
        end

        shared_appender.add_filters(
          Bosh::Common::Logging.null_query_filter,
          Bosh::Common::Logging.query_redaction_filter,
        )

        @logger = Logging::Logger.new(&#39;Director&#39;)
        @logger.add_appenders(shared_appender)
        @logger.level = Logging.levelify(logging_config.fetch(&#39;level&#39;, &#39;debug&#39;))

        # Event logger supposed to be overridden per task,
        # the default one does nothing
        @event_log = EventLog::Log.new

        # by default keep only last 2000 tasks of each type in disk
        @max_tasks = config.fetch(&#39;max_tasks&#39;, 2000).to_i

        @max_threads = config.fetch(&#39;max_threads&#39;, 32).to_i

        @revision = get_revision
        @version = config[&#39;version&#39;]

        @logger.info(&quot;Starting BOSH Director: #{@version} (#{@revision})&quot;)

        @process_uuid = SecureRandom.uuid
        @nats_uri = config[&#39;mbus&#39;]
        @nats_server_ca_path = config[&#39;nats&#39;][&#39;server_ca_path&#39;]<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank"><b>DuplicateMethodCall</b></a>        </span>      </div>      <span>Bosh::Director::Config#configure calls 'config['nats']' 5 times</span>              <span>Locations:</span>                  <a href="config.html#L135" class="js-smell-location">0</a>                  <a href="config.html#L136" class="js-smell-location">1</a>                  <a href="config.html#L137" class="js-smell-location">2</a>                  <a href="config.html#L138" class="js-smell-location">3</a>                  <a href="config.html#L139" class="js-smell-location">4</a>                  </div>  </li></ol>
        @nats_client_certificate_path = config[&#39;nats&#39;][&#39;client_certificate_path&#39;]<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank"><b>DuplicateMethodCall</b></a>        </span>      </div>      <span>Bosh::Director::Config#configure calls 'config['nats']' 5 times</span>              <span>Locations:</span>                  <a href="config.html#L135" class="js-smell-location">0</a>                  <a href="config.html#L136" class="js-smell-location">1</a>                  <a href="config.html#L137" class="js-smell-location">2</a>                  <a href="config.html#L138" class="js-smell-location">3</a>                  <a href="config.html#L139" class="js-smell-location">4</a>                  </div>  </li></ol>
        @nats_client_private_key_path = config[&#39;nats&#39;][&#39;client_private_key_path&#39;]<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank"><b>DuplicateMethodCall</b></a>        </span>      </div>      <span>Bosh::Director::Config#configure calls 'config['nats']' 5 times</span>              <span>Locations:</span>                  <a href="config.html#L135" class="js-smell-location">0</a>                  <a href="config.html#L136" class="js-smell-location">1</a>                  <a href="config.html#L137" class="js-smell-location">2</a>                  <a href="config.html#L138" class="js-smell-location">3</a>                  <a href="config.html#L139" class="js-smell-location">4</a>                  </div>  </li></ol>
        @nats_client_ca_certificate_path = config[&#39;nats&#39;][&#39;client_ca_certificate_path&#39;]<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank"><b>DuplicateMethodCall</b></a>        </span>      </div>      <span>Bosh::Director::Config#configure calls 'config['nats']' 5 times</span>              <span>Locations:</span>                  <a href="config.html#L135" class="js-smell-location">0</a>                  <a href="config.html#L136" class="js-smell-location">1</a>                  <a href="config.html#L137" class="js-smell-location">2</a>                  <a href="config.html#L138" class="js-smell-location">3</a>                  <a href="config.html#L139" class="js-smell-location">4</a>                  </div>  </li></ol>
        @nats_client_ca_private_key_path = config[&#39;nats&#39;][&#39;client_ca_private_key_path&#39;]<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank"><b>DuplicateMethodCall</b></a>        </span>      </div>      <span>Bosh::Director::Config#configure calls 'config['nats']' 5 times</span>              <span>Locations:</span>                  <a href="config.html#L135" class="js-smell-location">0</a>                  <a href="config.html#L136" class="js-smell-location">1</a>                  <a href="config.html#L137" class="js-smell-location">2</a>                  <a href="config.html#L138" class="js-smell-location">3</a>                  <a href="config.html#L139" class="js-smell-location">4</a>                  </div>  </li></ol>
        @nats_server_ca = File.read(@nats_server_ca_path)

        @default_ssh_options = config[&#39;default_ssh_options&#39;]

        @cloud_options = config[&#39;cloud&#39;]
        agent_config = config.fetch(&#39;agent&#39;, {})
        @agent_env = agent_config.fetch(&#39;env&#39;, {}).fetch(&#39;bosh&#39;, {})

        @agent_wait_timeout = agent_config.fetch(&#39;agent_wait_timeout&#39;, 600)

        @compiled_package_cache_options = config[&#39;compiled_package_cache&#39;]
        @name = config[&#39;name&#39;] || &#39;&#39;

        @runtime = config.fetch(&#39;runtime&#39;, {})
        @runtime[&#39;ip&#39;] ||= &#39;127.0.0.1&#39;
        @runtime[&#39;instance&#39;] ||= &#39;unknown&#39;

        @compiled_package_cache = nil

        @db_config = config[&#39;db&#39;]<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank"><b>DuplicateMethodCall</b></a>        </span>      </div>      <span>Bosh::Director::Config#configure calls 'config['db']' 2 times</span>              <span>Locations:</span>                  <a href="config.html#L159" class="js-smell-location">0</a>                  <a href="config.html#L160" class="js-smell-location">1</a>                  </div>  </li></ol>
        @db = configure_db(config[&#39;db&#39;])<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank"><b>DuplicateMethodCall</b></a>        </span>      </div>      <span>Bosh::Director::Config#configure calls 'config['db']' 2 times</span>              <span>Locations:</span>                  <a href="config.html#L159" class="js-smell-location">0</a>                  <a href="config.html#L160" class="js-smell-location">1</a>                  </div>  </li></ol>
        @dns = config[&#39;dns&#39;]
        if @dns &amp;&amp; @dns[&#39;db&#39;]<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank"><b>DuplicateMethodCall</b></a>        </span>      </div>      <span>Bosh::Director::Config#configure calls '@dns['db']' 2 times</span>              <span>Locations:</span>                  <a href="config.html#L162" class="js-smell-location">0</a>                  <a href="config.html#L163" class="js-smell-location">1</a>                  </div>  </li></ol>
          @dns_db = configure_db(@dns[&#39;db&#39;])<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank"><b>DuplicateMethodCall</b></a>        </span>      </div>      <span>Bosh::Director::Config#configure calls '@dns['db']' 2 times</span>              <span>Locations:</span>                  <a href="config.html#L162" class="js-smell-location">0</a>                  <a href="config.html#L163" class="js-smell-location">1</a>                  </div>  </li></ol>
          if @dns_db
            # Load these constants early.
            # These constants are not &#39;require&#39;d, they are &#39;autoload&#39;ed
            # in models.rb. We&#39;re seeing that in 1.9.3 that sometimes
            # the constants loaded from one thread are not visible to other threads,
            # causing failures.
            # These constants cannot be required because they are Sequel model classes
            # that refer to database configuration that is only present when the (optional)
            # powerdns job is present and configured and points to a valid DB.
            # This is an attempt to make sure the constants are loaded
            # before forking off to other threads, hopefully eliminating the errors.
            Bosh::Director::Models::Dns::Record.class
            Bosh::Director::Models::Dns::Domain.class
          end
        end

        @local_dns_enabled = config.fetch(&#39;local_dns&#39;, {}).fetch(&#39;enabled&#39;, false)<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank"><b>DuplicateMethodCall</b></a>        </span>      </div>      <span>Bosh::Director::Config#configure calls 'config.fetch('local_dns', {})' 3 times</span>              <span>Locations:</span>                  <a href="config.html#L180" class="js-smell-location">0</a>                  <a href="config.html#L181" class="js-smell-location">1</a>                  <a href="config.html#L182" class="js-smell-location">2</a>                  </div>  </li></ol>
        @local_dns_include_index = config.fetch(&#39;local_dns&#39;, {}).fetch(&#39;include_index&#39;, false)<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank"><b>DuplicateMethodCall</b></a>        </span>      </div>      <span>Bosh::Director::Config#configure calls 'config.fetch('local_dns', {})' 3 times</span>              <span>Locations:</span>                  <a href="config.html#L180" class="js-smell-location">0</a>                  <a href="config.html#L181" class="js-smell-location">1</a>                  <a href="config.html#L182" class="js-smell-location">2</a>                  </div>  </li></ol>
        @local_dns_use_dns_addresses = config.fetch(&#39;local_dns&#39;, {}).fetch(&#39;use_dns_addresses&#39;, false)<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank"><b>DuplicateMethodCall</b></a>        </span>      </div>      <span>Bosh::Director::Config#configure calls 'config.fetch('local_dns', {})' 3 times</span>              <span>Locations:</span>                  <a href="config.html#L180" class="js-smell-location">0</a>                  <a href="config.html#L181" class="js-smell-location">1</a>                  <a href="config.html#L182" class="js-smell-location">2</a>                  </div>  </li></ol>

        # UUID in config *must* only be used for tests
        @uuid = config[&#39;uuid&#39;] || Bosh::Director::Models::DirectorAttribute.find_or_create_uuid(@logger)
        @logger.info(&quot;Director UUID: #{@uuid}&quot;)

        @fix_stateful_nodes = config.fetch(&#39;scan_and_fix&#39;, {})
          .fetch(&#39;auto_fix_stateful_nodes&#39;, false)
        @enable_snapshots = config.fetch(&#39;snapshots&#39;, {}).fetch(&#39;enabled&#39;, false)

        @trusted_certs = config[&#39;trusted_certs&#39;] || &#39;&#39;
        @ignore_missing_gateway = config[&#39;ignore_missing_gateway&#39;]

        @keep_unreachable_vms = config.fetch(&#39;keep_unreachable_vms&#39;, false)
        @enable_post_deploy = config.fetch(&#39;enable_post_deploy&#39;, false)
        @enable_nats_delivered_templates = config.fetch(&#39;enable_nats_delivered_templates&#39;, false)
        @generate_vm_passwords = config.fetch(&#39;generate_vm_passwords&#39;, false)
        @remove_dev_tools = config[&#39;remove_dev_tools&#39;]
        @record_events = config.fetch(&#39;record_events&#39;, false)

        @enable_virtual_delete_vms = config.fetch(&#39;enable_virtual_delete_vms&#39;, false)

        @director_ips = Socket.ip_address_list.reject { |addr| !addr.ip? || addr.ipv4_loopback? || addr.ipv6_loopback? || addr.ipv6_linklocal? }.map { |addr| addr.ip_address }

        @config_server = config.fetch(&#39;config_server&#39;, {})
        @config_server_enabled = @config_server[&#39;enabled&#39;]

        if @config_server_enabled
          config_server_url = config_server[&#39;url&#39;]
          unless URI.parse(config_server_url).scheme == &#39;https&#39;
            raise ArgumentError, &quot;Config Server URL should always be https. Currently it is #{config_server_url}&quot;
          end
        end

        Bosh::Clouds::Config.configure(self)

        @lock = Monitor.new

        if config[&#39;verify_multidigest_path&#39;].nil?<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank"><b>DuplicateMethodCall</b></a>        </span>      </div>      <span>Bosh::Director::Config#configure calls 'config['verify_multidigest_path']' 2 times</span>              <span>Locations:</span>                  <a href="config.html#L220" class="js-smell-location">0</a>                  <a href="config.html#L223" class="js-smell-location">1</a>                  </div>  </li>  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Nil-Check.md" target="_blank"><b>NilCheck</b></a>        </span>      </div>      <span>Bosh::Director::Config#configure performs a nil-check</span>          </div>  </li></ol>
          raise ArgumentError, &#39;Multiple Digest binary must be specified&#39;
        end
        @verify_multidigest_path = config[&#39;verify_multidigest_path&#39;]<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank"><b>DuplicateMethodCall</b></a>        </span>      </div>      <span>Bosh::Director::Config#configure calls 'config['verify_multidigest_path']' 2 times</span>              <span>Locations:</span>                  <a href="config.html#L220" class="js-smell-location">0</a>                  <a href="config.html#L223" class="js-smell-location">1</a>                  </div>  </li></ol>
        @enable_cpi_resize_disk = config.fetch(&#39;enable_cpi_resize_disk&#39;, false)
        @default_update_vm_strategy = config.fetch(&#39;default_update_vm_strategy&#39;, nil)
      end

      def agent_env
        @agent_env || {}
      end

      def log_director_start
        log_director_start_event(&#39;director&#39;, uuid, { version: @version })
      end

      def log_director_start_event(object_type, object_name, context = {})
        event_manager = Api::EventManager.new(record_events)
        event_manager.create_event(
          {
            user: &#39;_director&#39;,
            action: &#39;start&#39;,
            object_type: object_type,
            object_name: object_name,
            context: context
          })
      end

      def root_domain
        dns_config = Config.dns || {}
        dns_config.fetch(&#39;domain_name&#39;, &#39;bosh&#39;)
      end

      def log_dir
        File.dirname(@log_file_path) if @log_file_path
      end

      def use_compiled_package_cache?
        !@compiled_package_cache_options.nil?<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Nil-Check.md" target="_blank"><b>NilCheck</b></a>        </span>      </div>      <span>Bosh::Director::Config#use_compiled_package_cache? performs a nil-check</span>          </div>  </li></ol>
      end

      def local_dns_enabled?
        !!@local_dns_enabled
      end

      def local_dns_include_index?
        !!@local_dns_include_index
      end

      def local_dns_use_dns_addresses?
        !!@local_dns_use_dns_addresses
      end

      def get_revision
        Dir.chdir(File.expand_path(&#39;../../../../../..&#39;, __FILE__))
        revision_command = &#39;(cat REVISION 2&gt; /dev/null || &#39; +
            &#39;git show-ref --head --hash=8 2&gt; /dev/null || &#39; +
            &#39;echo 00000000) | head -n1&#39;
        `#{revision_command}`.strip
      end

      def agent_wait_timeout
        @agent_wait_timeout ||= 600
      end

      def configure_db(db_config)<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="http://docs.seattlerb.org/flog/" target="_blank"><b>VeryHighComplexity</b></a>        </span>      </div>      <span>Bosh::Director::Config::configure_db has a flog score of 66</span>          </div>  </li>  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Too-Many-Statements.md" target="_blank"><b>TooManyStatements</b></a>        </span>      </div>      <span>Bosh::Director::Config#configure_db has approx 33 statements</span>          </div>  </li></ol>
        connection_config = db_config.dup
        custom_connection_options = connection_config.delete(&#39;connection_options&#39;) do
          {}
        end
        tls_options = connection_config.delete(&#39;tls&#39;) do
          {}
        end

        if tls_options.fetch(&#39;enabled&#39;, false)<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="http://docs.seattlerb.org/flay/" target="_blank"><b>DuplicateCode</b></a>        </span>      </div>      <span>Identical code found in 2 nodes</span>              <span>Locations:</span>                  <a href="config.html#L294" class="js-smell-location">0</a>                  <a href="../../../../bosh-registry/lib/bosh/registry/config.html#L54" class="js-smell-location">1</a>                  </div>  </li></ol>
          certificate_paths = tls_options.fetch(&#39;cert&#39;)
          db_ca_path = certificate_paths.fetch(&#39;ca&#39;)
          db_client_cert_path = certificate_paths.fetch(&#39;certificate&#39;)
          db_client_private_key_path = certificate_paths.fetch(&#39;private_key&#39;)

          db_ca_provided = tls_options.fetch(&#39;bosh_internal&#39;).fetch(&#39;ca_provided&#39;)<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank"><b>DuplicateMethodCall</b></a>        </span>      </div>      <span>Bosh::Director::Config#configure_db calls 'tls_options.fetch('bosh_internal')' 2 times</span>              <span>Locations:</span>                  <a href="config.html#L300" class="js-smell-location">0</a>                  <a href="config.html#L301" class="js-smell-location">1</a>                  </div>  </li></ol>
          mutual_tls_enabled = tls_options.fetch(&#39;bosh_internal&#39;).fetch(&#39;mutual_tls_enabled&#39;)<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank"><b>DuplicateMethodCall</b></a>        </span>      </div>      <span>Bosh::Director::Config#configure_db calls 'tls_options.fetch('bosh_internal')' 2 times</span>              <span>Locations:</span>                  <a href="config.html#L300" class="js-smell-location">0</a>                  <a href="config.html#L301" class="js-smell-location">1</a>                  </div>  </li></ol>

          case connection_config[&#39;adapter&#39;]
            when &#39;mysql2&#39;
              # http://sequel.jeremyevans.net/rdoc/files/doc/opening_databases_rdoc.html#label-mysql+
              connection_config[&#39;ssl_mode&#39;] = &#39;verify_identity&#39;
              connection_config[&#39;sslverify&#39;] = true
              connection_config[&#39;sslca&#39;] = db_ca_path if db_ca_provided
              connection_config[&#39;sslcert&#39;] = db_client_cert_path if mutual_tls_enabled<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Repeated-Conditional.md" target="_blank"><b>RepeatedConditional</b></a>        </span>      </div>      <span>Bosh::Director::Config tests 'mutual_tls_enabled' at least 3 times</span>              <span>Locations:</span>                  <a href="config.html#L309" class="js-smell-location">0</a>                  <a href="config.html#L310" class="js-smell-location">1</a>                  <a href="config.html#L320" class="js-smell-location">2</a>                  </div>  </li></ol>
              connection_config[&#39;sslkey&#39;] = db_client_private_key_path if mutual_tls_enabled<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Repeated-Conditional.md" target="_blank"><b>RepeatedConditional</b></a>        </span>      </div>      <span>Bosh::Director::Config tests 'mutual_tls_enabled' at least 3 times</span>              <span>Locations:</span>                  <a href="config.html#L309" class="js-smell-location">0</a>                  <a href="config.html#L310" class="js-smell-location">1</a>                  <a href="config.html#L320" class="js-smell-location">2</a>                  </div>  </li></ol>
            when &#39;postgres&#39;
              # http://sequel.jeremyevans.net/rdoc/files/doc/opening_databases_rdoc.html#label-postgres
              connection_config[&#39;sslmode&#39;] = &#39;verify-full&#39;
              connection_config[&#39;sslrootcert&#39;] = db_ca_path if db_ca_provided

              postgres_driver_options = {
                &#39;sslcert&#39; =&gt; db_client_cert_path,
                &#39;sslkey&#39; =&gt; db_client_private_key_path,
              }
              connection_config[&#39;driver_options&#39;] = postgres_driver_options if mutual_tls_enabled<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Repeated-Conditional.md" target="_blank"><b>RepeatedConditional</b></a>        </span>      </div>      <span>Bosh::Director::Config tests 'mutual_tls_enabled' at least 3 times</span>              <span>Locations:</span>                  <a href="config.html#L309" class="js-smell-location">0</a>                  <a href="config.html#L310" class="js-smell-location">1</a>                  <a href="config.html#L320" class="js-smell-location">2</a>                  </div>  </li></ol>
          end
        end

        connection_config.delete_if { |_, v| v.to_s.empty? }<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank"><b>UncommunicativeVariableName</b></a>        </span>      </div>      <span>Bosh::Director::Config#configure_db has the variable name 'v'</span>          </div>  </li></ol>
        connection_config = connection_config.merge(custom_connection_options)

        Sequel.default_timezone = :utc
        db = Sequel.connect(connection_config)

        Bosh::Common.retryable(sleep: 0.5, tries: 20, on: [Exception]) do
          db.extension :connection_validator
          true
        end

        db.pool.connection_validation_timeout = -1
        if logger
          db.logger = logger
          db.sql_log_level = :debug
          db.log_connection_info = true
        end

        db
      end

      def compiled_package_cache_blobstore
        @lock.synchronize do
          if @compiled_package_cache_blobstore.nil? &amp;&amp; use_compiled_package_cache?<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Nil-Check.md" target="_blank"><b>NilCheck</b></a>        </span>      </div>      <span>Bosh::Director::Config#compiled_package_cache_blobstore performs a nil-check</span>          </div>  </li></ol>
            provider = @compiled_package_cache_options[&#39;provider&#39;]
            options = @compiled_package_cache_options[&#39;options&#39;]
            @compiled_package_cache_blobstore = Bosh::Blobstore::Client.safe_create(provider, options)
          end
        end
        @compiled_package_cache_blobstore
      end

      def compiled_package_cache_provider
        use_compiled_package_cache? ? @compiled_package_cache_options[&#39;provider&#39;] : nil
      end

      def cloud_type
        if @cloud_options
          @cloud_options[&#39;plugin&#39;] || @cloud_options[&#39;provider&#39;][&#39;name&#39;]
        end
      end

      def director_pool
        @director_pool ||= Socket.gethostname
      end

      def cpi_task_log
        Config.cloud_options.fetch(&#39;properties&#39;, {}).fetch(&#39;cpi_log&#39;)
      end

      def job_cancelled?
        @current_job.task_checkpoint if @current_job
      end

      alias_method :task_checkpoint, :job_cancelled?

      def cloud_options=(options)
        @lock.synchronize do
          @cloud_options = options
        end
      end

      def nats_rpc
        # double-check locking to reduce synchronization
        if @nats_rpc.nil?<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank"><b>DuplicateMethodCall</b></a>        </span>      </div>      <span>Bosh::Director::Config#nats_rpc calls '@nats_rpc.nil?' 2 times</span>              <span>Locations:</span>                  <a href="config.html#L388" class="js-smell-location">0</a>                  <a href="config.html#L390" class="js-smell-location">1</a>                  </div>  </li>  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Nil-Check.md" target="_blank"><b>NilCheck</b></a>        </span>      </div>      <span>Bosh::Director::Config#nats_rpc performs a nil-check</span>              <span>Locations:</span>                  <a href="config.html#L388" class="js-smell-location">0</a>                  <a href="config.html#L390" class="js-smell-location">1</a>                  </div>  </li></ol>
          @lock.synchronize do
            if @nats_rpc.nil?<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank"><b>DuplicateMethodCall</b></a>        </span>      </div>      <span>Bosh::Director::Config#nats_rpc calls '@nats_rpc.nil?' 2 times</span>              <span>Locations:</span>                  <a href="config.html#L388" class="js-smell-location">0</a>                  <a href="config.html#L390" class="js-smell-location">1</a>                  </div>  </li>  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Nil-Check.md" target="_blank"><b>NilCheck</b></a>        </span>      </div>      <span>Bosh::Director::Config#nats_rpc performs a nil-check</span>              <span>Locations:</span>                  <a href="config.html#L388" class="js-smell-location">0</a>                  <a href="config.html#L390" class="js-smell-location">1</a>                  </div>  </li></ol>
              @nats_rpc = NatsRpc.new(@nats_uri, @nats_server_ca_path, @nats_client_private_key_path, @nats_client_certificate_path)
            end
          end
        end
        @nats_rpc
      end

      def threaded
        Thread.current[:bosh] ||= {}
      end

      def generate_temp_dir<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Too-Many-Statements.md" target="_blank"><b>TooManyStatements</b></a>        </span>      </div>      <span>Bosh::Director::Config#generate_temp_dir has approx 9 statements</span>          </div>  </li></ol>
        temp_dir = Dir.mktmpdir
        ENV[&quot;TMPDIR&quot;] = temp_dir
        FileUtils.mkdir_p(temp_dir)
        at_exit do
          begin
            if $!
              status = $!.is_a?(::SystemExit) ? $!.status : 1
            else
              status = 0
            end
            FileUtils.rm_rf(temp_dir)
          ensure
            exit status
          end
        end
        temp_dir
      end

      def load_file(path)
        Config.new(YAML.load_file(path))
      end

      def load_hash(hash)
        Config.new(hash)
      end
    end

    def name
      hash[&#39;name&#39;]
    end

    def port
      hash[&#39;port&#39;]
    end

    def puma_workers
      hash[&#39;puma_workers&#39;]
    end

    def version
      hash[&#39;version&#39;]
    end

    def scheduled_jobs
      hash[&#39;scheduled_jobs&#39;] || []
    end

    def identity_provider<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Too-Many-Statements.md" target="_blank"><b>TooManyStatements</b></a>        </span>      </div>      <span>Bosh::Director::Config#identity_provider has approx 8 statements</span>          </div>  </li></ol>
      @identity_provider ||= begin
        # no fetching w defaults?
        user_management = hash[&#39;user_management&#39;]
        user_management ||= {&#39;provider&#39; =&gt; &#39;local&#39;}
        provider_name = user_management[&#39;provider&#39;]

        providers = {
          &#39;uaa&#39; =&gt; Bosh::Director::Api::UAAIdentityProvider,
          &#39;local&#39; =&gt; Bosh::Director::Api::LocalIdentityProvider,
        }
        provider_class = providers[provider_name]

        if provider_class.nil?<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Nil-Check.md" target="_blank"><b>NilCheck</b></a>        </span>      </div>      <span>Bosh::Director::Config#identity_provider performs a nil-check</span>          </div>  </li></ol>
          raise ArgumentError,
            &quot;Unknown user management provider &#39;#{provider_name}&#39;, &quot; +
              &quot;available providers are: #{providers.keys.join(&quot;, &quot;)}&quot;
        end

        Config.logger.debug(&quot;Director configured with &#39;#{provider_name}&#39; user management provider&quot;)
        provider_class.new(user_management[provider_name] || {})
      end
    end

    def config_server_urls<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Utility-Function.md" target="_blank"><b>UtilityFunction</b></a>        </span>      </div>      <span>Bosh::Director::Config#config_server_urls doesn't depend on instance state (maybe move it to another class?)</span>          </div>  </li></ol>
      cfg_server_url = Config.config_server[&#39;url&#39;]
      cfg_server_url ? [cfg_server_url] : []
    end

    def worker_logger<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="http://docs.seattlerb.org/flog/" target="_blank"><b>HighComplexity</b></a>        </span>      </div>      <span>Bosh::Director::Config#worker_logger has a flog score of 25</span>          </div>  </li>  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Too-Many-Statements.md" target="_blank"><b>TooManyStatements</b></a>        </span>      </div>      <span>Bosh::Director::Config#worker_logger has approx 7 statements</span>          </div>  </li></ol>
      logger = Logging::Logger.new(&#39;DirectorWorker&#39;)
      logging_config = hash.fetch(&#39;logging&#39;, {})
      worker_logging = hash.fetch(&#39;delayed_job&#39;, {}).fetch(&#39;logging&#39;, {})
      if worker_logging.has_key?(&#39;file&#39;)
        logger.add_appenders(Logging.appenders.file(&#39;DirectorWorkerFile&#39;, filename: worker_logging.fetch(&#39;file&#39;), layout: ThreadFormatter.layout))<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank"><b>DuplicateMethodCall</b></a>        </span>      </div>      <span>Bosh::Director::Config#worker_logger calls 'Logging.appenders' 2 times</span>              <span>Locations:</span>                  <a href="config.html#L484" class="js-smell-location">0</a>                  <a href="config.html#L486" class="js-smell-location">1</a>                  </div>  </li>  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank"><b>DuplicateMethodCall</b></a>        </span>      </div>      <span>Bosh::Director::Config#worker_logger calls 'ThreadFormatter.layout' 2 times</span>              <span>Locations:</span>                  <a href="config.html#L484" class="js-smell-location">0</a>                  <a href="config.html#L486" class="js-smell-location">1</a>                  </div>  </li>  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank"><b>FeatureEnvy</b></a>        </span>      </div>      <span>Bosh::Director::Config#worker_logger refers to 'logger' more than self (maybe move it to another class?)</span>              <span>Locations:</span>                  <a href="config.html#L484" class="js-smell-location">0</a>                  <a href="config.html#L486" class="js-smell-location">1</a>                  <a href="config.html#L488" class="js-smell-location">2</a>                  </div>  </li></ol>
      else
        logger.add_appenders(Logging.appenders.stdout(&#39;DirectorWorkerIO&#39;, layout: ThreadFormatter.layout))<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank"><b>DuplicateMethodCall</b></a>        </span>      </div>      <span>Bosh::Director::Config#worker_logger calls 'Logging.appenders' 2 times</span>              <span>Locations:</span>                  <a href="config.html#L484" class="js-smell-location">0</a>                  <a href="config.html#L486" class="js-smell-location">1</a>                  </div>  </li>  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank"><b>DuplicateMethodCall</b></a>        </span>      </div>      <span>Bosh::Director::Config#worker_logger calls 'ThreadFormatter.layout' 2 times</span>              <span>Locations:</span>                  <a href="config.html#L484" class="js-smell-location">0</a>                  <a href="config.html#L486" class="js-smell-location">1</a>                  </div>  </li>  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank"><b>FeatureEnvy</b></a>        </span>      </div>      <span>Bosh::Director::Config#worker_logger refers to 'logger' more than self (maybe move it to another class?)</span>              <span>Locations:</span>                  <a href="config.html#L484" class="js-smell-location">0</a>                  <a href="config.html#L486" class="js-smell-location">1</a>                  <a href="config.html#L488" class="js-smell-location">2</a>                  </div>  </li></ol>
      end
      logger.level = Logging.levelify(logging_config.fetch(&#39;level&#39;, &#39;debug&#39;))<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank"><b>FeatureEnvy</b></a>        </span>      </div>      <span>Bosh::Director::Config#worker_logger refers to 'logger' more than self (maybe move it to another class?)</span>              <span>Locations:</span>                  <a href="config.html#L484" class="js-smell-location">0</a>                  <a href="config.html#L486" class="js-smell-location">1</a>                  <a href="config.html#L488" class="js-smell-location">2</a>                  </div>  </li></ol>
      logger
    end

    def db
      Config.configure_db(hash[&#39;db&#39;])
    end

    def dns_db
      dns_db = hash.dig(&#39;dns&#39;, &#39;db&#39;)
      Config.configure_db(dns_db) if dns_db
    end

    def cpi
      hash.dig(&#39;cloud&#39;, &#39;plugin&#39;)
    end

    def blobstore_config
      hash.fetch(&#39;blobstore&#39;)
    end

    def backup_blobstore_config
      hash[&#39;backup_destination&#39;]
    end

    def log_access_events_to_syslog
      hash[&#39;log_access_events_to_syslog&#39;]
    end

    def director_pool<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Utility-Function.md" target="_blank"><b>UtilityFunction</b></a>        </span>      </div>      <span>Bosh::Director::Config#director_pool doesn't depend on instance state (maybe move it to another class?)</span>          </div>  </li></ol>
      Config.director_pool
    end

    def configure_evil_config_singleton!<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Prima-Donna-Method.md" target="_blank"><b>PrimaDonnaMethod</b></a>        </span>      </div>      <span>Bosh::Director::Config has prima donna method 'configure_evil_config_singleton!'</span>          </div>  </li></ol>
      Config.configure(hash)
    end

    def get_uuid_provider<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Utility-Function.md" target="_blank"><b>UtilityFunction</b></a>        </span>      </div>      <span>Bosh::Director::Config#get_uuid_provider doesn't depend on instance state (maybe move it to another class?)</span>          </div>  </li></ol>
      Bosh::Director::Api::DirectorUUIDProvider.new(Config)
    end

    def record_events
      hash.fetch(&#39;record_events&#39;, false)
    end

    private

    attr_reader :hash

    def initialize(hash)
      @hash = hash
    end
  end
end
</code>
  </div>
</div>

        </div>
      </div>
    </div>

    <!-- Javascripts -->
    <script src='../../../../assets/javascripts/jquery.min.js'></script>
    <script src='../../../../assets/javascripts/jquery.tablesorter.min.js'></script>
    <script src='../../../../assets/javascripts/jquery.scrollTo.min.js'></script>
    <script src='../../../../assets/javascripts/jquery.timeago.js'></script>
    <script src='../../../../assets/javascripts/highcharts.src-4.0.1.js'></script>
    <script src='../../../../assets/javascripts/prettify.js'></script>
    <script src='../../../../assets/javascripts/bootstrap.min.js'></script>
    <script src='../../../../assets/javascripts/application.js'></script>
    <script src='../../../../assets/javascripts/jquery.filtertable.min.js'></script>
  </body>
</html>
